let main=document.querySelectorAll(".abmshawon"),mainArr=Array.from(main);function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}let menu=document.querySelector(".menu");window.addEventListener("scroll",function(){let e=window.pageYOffset,t=window.pageYOffset+menu.getBoundingClientRect().top;console.log(t),e>t?menu.classList.add("menufixed"):menu.classList.remove("menufixed")}),mainArr.map(e=>{let t=e.dataset.name,n=e.dataset.time,a=new Date(n).getTime(),r=setInterval(function(){let n=(new Date).getTime(),i=a-n,s=Math.floor(i/864e5),l=Math.floor(i%864e5/36e5),o=Math.floor(i%36e5/6e4),d=Math.floor(i%6e4/1e3);"counterdownday"===t?e.innerHTML=s:"counterdownhour"===t?e.innerHTML=l:"counterdownmin"===t?e.innerHTML=o:"counterdownsec"===t&&(e.innerHTML=d),i<0&&(clearInterval(r),e.innerHTML="EXPIRED")},1e3);if("snow"===t){document.querySelector("body").style.overflowX="hidden";let t=e.dataset.bg,n=e.dataset.snowamount,a=e.dataset.snowsize,r=e.dataset.snowspeed,s=e.dataset.height,l=e.dataset.width;e.style.background=t;let o=e.getContext("2d"),d=window.innerWidth,c=window.innerHeight;d="auto"===l?window.innerWidth:l,c="auto"===s?window.innerHeight:s,e.width=d,e.height=c;let p=n,u=[];for(i=0;i<p;i++)u.push({x:Math.random()*d,y:Math.random()*c,r:Math.random()*a+2,d:Math.random()+parseInt(r)});setInterval(function(){for(o.clearRect(0,0,d,c),o.fillStyle="white",o.beginPath(),i=0;i<p;i++){let e=u[i];o.moveTo(e.x,e.y),o.arc(e.x,e.y,e.r,0,2*Math.PI,!0)}o.fill(),function(){for(i=0;i<p;i++){let e=u[i];e.y+=Math.pow(e.d,2),e.y>c&&(u[i]={x:e.x,y:0,r:e.r,d:e.d})}}()},25)}else if("bgspreader"===t){let t=e.dataset.bg,n=e.dataset.height;e.style.background=t,e.style.backgroundAttachment="fixed",e.style.height=n,e.style.clipPath="circle(0px at center)",window.addEventListener("scroll",function(){let t=window.scrollY;e.style.clipPath=`circle(${t}px at center)`})}else if("popup"===t){let t=e.dataset.popid,n=e.dataset.bg,i=document.querySelector(`${t}`);i.style.opacity="0",i.style.width="100%",i.style.height="100vh",i.style.background=`${n}`,i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.transform="scale(0)",i.style.transition=".4s",e.addEventListener("click",function(){i.style.transform="scale(1)",i.style.opacity="1"})}else if("popclose"===t){let t=e.dataset.popid,n=document.querySelector(`${t}`);n.style.cursor="pointer",e.addEventListener("click",function(){n.style.transform="scale(0)",n.style.opacity="0"})}else if("topbottom"===t){let t=e.dataset.scrollvalue;console.log(t),e.addEventListener("click",function(){window.scrollTo({top:t})})}}),window.onload=function(){mainArr.map(e=>{if(isInViewport(e)&&e.dataset.view){let t=e.dataset.name,n=e.dataset.height,i=e.dataset.parcent,a=e.dataset.bg,r=e.dataset.pmove,s=e.dataset.speed;if("counterup"===t){let t=e.innerHTML,n=0;let i=setInterval(()=>{e.innerHTML=n++,n>Number(t)&&clearInterval(i)},s)}else if("progressbar"===t){let t=0;let l=setInterval(()=>{t+=.1,"true"===r?(e.style.position="relative",e.innerHTML=`<div class="percentages" style="position:absolute;right:0;top:0;">${parseInt(t)}%</div>`):e.innerHTML=`<div class="percentages">${parseInt(t)}%</div>`,e.style.width=`${t}%`,e.style.height=`${n}`,e.style.background=`${a}`,t>i&&clearInterval(l)},s)}else if("typejs"===t){let t=e.innerHTML,n=e.innerHTML.split(""),i=-1;e.innerHTML="";setInterval(()=>{i<t.length?(i++,e.innerHTML+=t.charAt(i),n=e.innerHTML.split("")):(n.pop(),e.innerHTML=n.join(""),0==n.length&&(i=-1))},200)}e.dataset.view=""}})},window.onscroll=function(){mainArr.map(e=>{if(isInViewport(e)&&e.dataset.view){let t=e.dataset.name,n=e.dataset.height,i=e.dataset.parcent,a=e.dataset.bg,r=e.dataset.pmove,s=e.dataset.speed;if("counterup"===t){let t=e.innerHTML,n=0;let i=setInterval(()=>{e.innerHTML=n++,n>Number(t)&&clearInterval(i)},s)}else if("progressbar"===t){let t=0;let l=setInterval(()=>{t+=.1,"true"==r?(e.style.position="relative",e.innerHTML=`<div class="percentages" style="position:absolute;right:0;top:0;">${parseInt(t)}</div>`):e.innerHTML=`<div class="percentages">${parseInt(t)}</div>`,e.style.width=`${t}%`,e.style.height=`${n}`,e.style.background=`${a}`,t>i&&clearInterval(l)},s)}else if("typejs"===t){let t=e.innerHTML,n=e.innerHTML.split(""),i=-1;e.innerHTML="";setInterval(()=>{i<t.length?(i++,e.innerHTML+=t.charAt(i),n=e.innerHTML.split("")):(n.pop(),e.innerHTML=n.join(""),0==n.length&&(i=-1))},200)}e.dataset.view=""}})};